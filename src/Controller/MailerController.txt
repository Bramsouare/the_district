<?php

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Mailer\MailerInterface;
use Symfony\Bridge\Twig\Mime\TemplatedEmail;
use Symfony\Component\Mime\Email;
use Symfony\Component\Mime\Address;
use Symfony\Component\Routing\Attribute\Route;

class MailerController extends AbstractController
{
    #[Route ('/mailer', name: 'app_mailer') ]

    public function sendEmail (MailerInterface $mailer) : Response
    {
        $email = (new TemplatedEmail () )

        -> from ('souare@gmail.com', 'souare')

        // -> to ($user -> getEmail ())
        -> to ('ff@ff.gt')

        -> subject ('Confirmation de commande')

        -> htmlTemplate ('mailer/index.html.twig')

        // -> context (
            
        //     [
        //         'formData' => $formData,
        //     ]
        // );

        $this -> mailer -> send ($email);
    

    return $this -> redirectToRoute ('app_finaliser');
   }
} 
